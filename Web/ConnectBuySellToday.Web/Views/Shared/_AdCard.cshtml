@model ConnectBuySellToday.Application.DTOs.AdDto

<div class="card h-100 shadow-sm hover-shadow transition position-relative">
    <!-- Heart Icon - Add to Favorites (Top Right) -->
    <button type="button" class="btn-favorite position-absolute" 
            style="top: 10px; right: 10px; z-index: 20; background: white; border: none; border-radius: 50%; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.2);" 
            onclick="event.preventDefault(); event.stopPropagation(); toggleFavorite('@Model.Id')">
        <i class="bi bi-heart text-danger"></i>
    </button>
    
    @if (Model.IsFeatured && Model.FeaturedExpiryDate > DateTime.UtcNow)
    {
        <div class="featured-badge">
            <i class="bi bi-star-fill"></i> Featured
            <span class="featured-expiry">until @Model.FeaturedExpiryDate?.ToString("MMM dd")</span>
        </div>
    }
    
    <a asp-controller="Ads" asp-action="Details" asp-route-id="@Model.Id" class="text-decoration-none">
        <img src="@(Model.MainImageUrl ?? "/images/no-image.png")"
             class="card-img-top" alt="@Model.Title"
             style="height: 200px; object-fit: cover;">

        <div class="card-body">
            <h5 class="card-title text-success fw-bold">@Model.Price.ToString("N0")</h5>
            <p class="card-text text-truncate text-dark" style="max-width: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">@Model.Title</p>
        </div>

        <div class="card-footer bg-white border-top-0">
            <small class="text-muted d-block">
                <i class="bi bi-geo-alt"></i> @(Model.CityName ?? "Unknown Location")
            </small>
            <small class="text-muted">
                @Model.CreatedAt.ToString("MMM dd, yyyy")
            </small>
        </div>
    </a>
</div>

<style>
    .hover-shadow:hover {
        transform: translateY(-5px);
        box-shadow: 0 1rem 3rem rgba(0,0,0,.175) !important;
        transition: all 0.3s ease;
    }
    .card {
        color: inherit;
    }
    .featured-badge {
        position: absolute;
        top: 10px;
        left: 10px;
        background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
        color: #333;
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 600;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        z-index: 10;
        display: flex;
        align-items: center;
        gap: 4px;
        animation: pulse 2s infinite;
    }
    .featured-badge i {
        color: #b8860b;
    }
    .featured-expiry {
        font-size: 0.65rem;
        opacity: 0.9;
        margin-left: 4px;
        font-weight: 500;
    }
    @@keyframes pulse {
        0% {
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        50% {
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.6);
        }
        100% {
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
    }
</style>
